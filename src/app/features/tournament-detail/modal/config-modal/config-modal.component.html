<app-modal-base
  [isOpen]="isOpen"
  title="Configuraci√≥n del Torneo"
  size="large"
  (closeModal)="close()"
>
  <form (ngSubmit)="save()">
    <div class="modal-body">
      <div class="form-section">
        <div class="form-group">
          <label>Nombre del torneo *</label>
          <input
            type="text"
            [(ngModel)]="editForm.nombre"
            name="nombre"
            placeholder="Ej: Liga Primavera 2025"
          />
        </div>

        <div class="form-grid">
          <div class="form-counter">
            <label>Vueltas a jugar</label>
            <div class="counter">
              <button type="button" (click)="decrementar('vueltas')">‚àí</button>
              <span>{{ editForm.vueltas }}</span>
              <button type="button" (click)="incrementar('vueltas')">+</button>
            </div>
          </div>

          <div class="form-counter">
            <label>Clasificaci√≥n de playoffs</label>
            <div class="counter">
              <button type="button" (click)="decrementar('cupos_playoffs')">‚àí</button>
              <span>{{ editForm.cupos_playoffs }}</span>
              <button type="button" (click)="incrementar('cupos_playoffs')">+</button>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Modalidad de juego</label>
          <div class="mode-buttons">
            <input type="text" [readonly]="true" value="3 vs 3" class="mode-input" />
            <button
              type="button"
              class="mode-btn"
              [class.active]="editForm.modalidad === '5v5'"
              (click)="editForm.modalidad = '5v5'"
            >
              5 vs 5
            </button>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-counter">
            <label>D√≠as por semana</label>
            <div class="counter">
              <button type="button" (click)="decrementar('dias_por_semana')">‚àí</button>
              <span>{{ editForm.dias_por_semana }}</span>
              <button type="button" (click)="incrementar('dias_por_semana')">+</button>
            </div>
          </div>

          <div class="form-counter">
            <label>Partidos por d√≠a</label>
            <div class="counter">
              <button type="button" (click)="decrementar('partidos_por_dia')">‚àí</button>
              <span>{{ editForm.partidos_por_dia }}</span>
              <button type="button" (click)="incrementar('partidos_por_dia')">+</button>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>Hora de inicio</label>
            <input
              type="time"
              [(ngModel)]="editForm.hora_ini"
              name="hora_ini"
              required
            />
          </div>

          <div class="form-group">
            <label>Hora de fin</label>
            <input
              type="time"
              [(ngModel)]="editForm.hora_fin"
              name="hora_fin"
              required
            />
          </div>
        </div>

        <div class="form-counter">
          <label>Duraci√≥n de partido (minutos)</label>
          <div class="counter">
            <button
              type="button"
              (click)="editForm.slot_min = Math.max(10, (editForm.slot_min ?? 0) - 10)"
            >
              ‚àí
            </button>
            <span>{{ editForm.slot_min ?? 0 }} min</span>
            <button
              type="button"
              (click)="editForm.slot_min = (editForm.slot_min ?? 0) + 10"
            >
              +
            </button>
          </div>
        </div>
      </div>

      <hr />

      <div class="form-section">
        <h4 class="section-title">
          <span class="icon">üèüÔ∏è</span> Canchas del Torneo
        </h4>

        <div *ngIf="canchas.length === 0" class="empty-state">
          <p>No hay canchas agregadas</p>
        </div>

        <ul *ngIf="canchas.length > 0" class="cancha-list">
          <li *ngFor="let cancha of canchas" class="cancha-item">
            <div>
              <strong>{{ cancha.nombre }}</strong>
              <span class="cancha-ubicacion">{{ cancha.ubicacion }}</span>
            </div>
            <button 
              type="button"
              class="btn-icon-small btn-delete" 
              (click)="eliminarCancha(cancha)"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </li>
        </ul>

        <div class="form-grid cancha-form">
          <input
            type="text"
            placeholder="Nombre de la cancha"
            [(ngModel)]="nuevaCancha.nombre"
            name="nombre_cancha"
          />
          <input
            type="text"
            placeholder="Ubicaci√≥n"
            [(ngModel)]="nuevaCancha.ubicacion"
            name="ubicacion"
          />
          <button
            type="button"
            class="btn btn-primary"
            (click)="agregarCancha()"
          >
            + Agregar
          </button>
        </div>
      </div>
    </div>

    <div slot="footer" class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="close()">Cancelar</button>
      <button type="submit" class="btn btn-primary">Guardar Configuraci√≥n</button>
    </div>
  </form>
</app-modal-base>